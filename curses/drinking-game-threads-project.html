<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Fri Oct 15 2021 16:30:38 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="61611639fe040cb1efe81a0d" data-wf-site="602f42d4d0eb6ddf9136273c">
<head>
  <meta charset="utf-8">
  <title>Drinking Game Threads Project</title>
  <meta content="Drinking Game Threads Project" property="og:title">
  <meta content="Drinking Game Threads Project" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../css/juan-diegos-portfolio.webflow.css" rel="stylesheet" type="text/css">
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="../images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body">
  <div data-w-id="ff3ac0b1-c979-2917-beb2-e00e39f97f07" data-animation="over-right" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-3 w-nav">
    <div class="container-8 w-container">
      <a href="../index.html" class="nav-logo-link"><img src="../images/Logo-Name-Portfolio.png" alt="IMAGE" class="nav-logo"></a>
      <nav role="navigation" class="nav-menu-3 w-nav-menu">
        <a href="../index.html" class="nav-link home works w-nav-link">HOME</a>
        <a href="#" class="nav-link home works w-nav-link">SUMMARY</a>
        <a href="#" class="nav-link home works w-nav-link">FEATURES</a>
        <a href="#" class="nav-link home works w-nav-link">DESIGN</a>
      </nav>
      <div class="menu-button-2 w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <div class="section background-black curses wf-section">
    <div class="centered-container-7 this w-container">
      <h1 class="heading-curses this">Drinking Game Threads Project</h1>
      <p class="paragraph-5 curses">This project is about the process of implement the &#x27;Starting gun&#x27; and &#x27;Shutting down&#x27; logic for detached threads.<br></p>
    </div>
    <div class="div-block-32 dl curses">
      <div class="text-block-11">Feel Free to Download the Source Code.</div>
      <a href="https://github.com/JDMAXilius/Drinking-Game-Threads-Project.git" target="_blank" class="button-6 ds w-button">Source Code</a>
    </div>
    <div class="container-7 w-container">
      <h2 class="heading-26-curse-2"><strong>Project Topics</strong></h2>
      <p class="paragrahps-2 blog colum curses"><span class="text-span-3"><strong>Explanations</strong></span><strong><br></strong>Synchronization<br>Deadlocks<br>Thread Types<br>Mutex<br>Condition Variables<br>Synchronization Primitives<br>Deadlocks<br><br><br>‍<br><strong><br><br><br><br></strong></p>
    </div>
    <section id="Features" class="flex-container line curses w-container">
      <h2 class="heading-18"><strong>Objectives</strong></h2>
    </section>
    <div class="div-block-34 curses"><img src="../images/2847-parent__14215.1551751220.jpg" loading="lazy" sizes="(max-width: 1439px) 30vw, 25vw" srcset="../images/2847-parent__14215.1551751220-p-800.jpeg 800w, ../images/2847-parent__14215.1551751220-p-1080.jpeg 1080w, ../images/2847-parent__14215.1551751220.jpg 1280w" alt="image" class="image-19 curses"></div>
    <div class="container-7 w-container">
      <div class="rich-text-block-5 curses heading-curses w-richtext">
        <p>When dealing with threads and the need to access multiple mutex-protected resources, there is the possibility for “deadlock” to occur. Deadlock (sometimes called “deadly embrace”) is a situation where two or more competing actions are waiting for the other to finish, and thus neither ever does. To illustrate this, we are going to write code to run a drinking game.</p>
      </div>
    </div>
    <section id="Code" class="flex-container line curses w-container">
      <h2 class="heading-18"><strong>Programming Code</strong></h2>
    </section>
    <div data-hover="false" data-delay="0" class="dropdown-2 w-dropdown">
      <div data-w-id="6d698fcd-3d73-34e6-a87b-2a5a413ecd6f" class="dropdown-toggle-2 w-dropdown-toggle">
        <div data-w-id="6d698fcd-3d73-34e6-a87b-2a5a413ecd70" class="icon accordion-icon w-icon-dropdown-toggle"></div>
        <div class="text-block-13">Raster Surface Initiation</div>
      </div>
      <nav class="dropdown-list-2 w-dropdown-list">
        <div class="flex-container-grid this w-container">
          <p class="code-text">A raster display is made up of a grid (the raster) of picture-elements (pixels) where each pixel can be triggered to emit<br>light. Resolution describes the horizontal and vertical number of pixels.​<br><br><strong>Define</strong><br>Let’s initialize our Raster Surface to a window size of 500 by 500.<br>⦁ 500 pixels wide by 500 pixels tall<br><br><strong>Code<br>‍</strong><br>unsigned int raster[500 * 500] = { 0, };<br><br>int main()<br>{<br> RS_Initialize(500, 500);<br> do {<br> <br> <br> } while (RS_Update(raster, 250000));<br> RS_Shutdown();<br> return 0;<br>}<br></p>
        </div>
      </nav>
    </div>
    <div data-hover="false" data-delay="0" class="dropdown-2 w-dropdown">
      <div data-w-id="6d698fcd-3d73-34e6-a87b-2a5a413ecda0" class="dropdown-toggle-2 w-dropdown-toggle">
        <div data-w-id="6d698fcd-3d73-34e6-a87b-2a5a413ecda1" class="icon accordion-icon w-icon-dropdown-toggle"></div>
        <div class="text-block-13">Helper Functions</div>
      </div>
      <nav class="dropdown-list-2 w-dropdown-list">
        <div class="flex-container-grid this w-container">
          <p class="code-text">You will also be writing a few helper functions to assist you in this process. <br>Here are a few example functions you might need.<br>‍<br>A function to clear the color buffer to a solid color of your choice.<br>A function to convert 2 dimensional coordinates to a 1 dimensional coordinate.<br>A function to draw a pixel (fill a certain pixelwith a specific color).<br>A function to BLIT (Block Image Transfer)<br><strong><br>Code<br>‍</strong><br>unsigned int lerp(unsigned int A, unsigned int B);<br>unsigned int colorConverter(unsigned int color);//A function to clear the color buffer to a solid color of your choice<br>//not used for now!<br>‍<br>void clearColor(unsigned color)<br>{<br> std::memset(raster, color, sizeof raster);<br>}<br><br>//A function to convert 2 dimensional coordinates to a 1 dimensional coordinate<br>int convertDimensionalCordinates(int X, int Y, int Width)//find coordinates<br>{<br> int conversion = (X + Y * Width);<br> return conversion;<br>}<br><br>//A function to draw a pixel (fill a certain pixel with a specific color)<br>void drawPixel(int x, int y, unsigned int color)<br>{<br> unsigned int alphaColor = (color &amp; 0xFF000000);<br> alphaColor &gt;&gt; 24; if (alphaColor &gt; 255)<br> {<br> raster[convertDimensionalCordinates(x, y, 500)] = lerp(raster[convertDimensionalCordinates(x, y, 500)], color);<br> }<br> else<br> {<br> raster[convertDimensionalCordinates(x, y, 500)] = color;<br> }<br>}<br><br>//A function to BLIT (Block Image Transfer)<br>void blit(const unsigned int* source, int nSourceTextureWidth, RECT SourceRect, int DestX, int DestY)<br>{<br> int heigth = SourceRect.bottom - SourceRect.top;<br> int width = SourceRect.right - SourceRect.left; for (int i = 0; i &lt; heigth; i++)<br> {<br> for (int j = 0; j &lt; width; j++)<br> {<br> drawPixel(j + DestX, i + DestY, colorConverter(source[convertDimensionalCordinates(j + SourceRect.left, i + SourceRect.top,                         nSourceTextureWidth)]));<br> }<br> }<br>}<br><br>//A function to clear the color buffer to a solid color of your choice.<br>//Swap the color bits from BGRA to ARGB and get 10 random objects in the color array<br>unsigned int lerp(unsigned int A, unsigned int B)<br>{<br> //A colors<br> unsigned int Aalpha = (A &amp; 0xFF000000) &gt;&gt; 24;<br> unsigned int Ared = (A &amp; 0x00FF0000) &gt;&gt; 16;<br> unsigned int Agreen = (A &amp; 0x0000FF00) &gt;&gt; 8;<br> unsigned int Ablue = (A &amp; 0x000000FF); //B colors<br> unsigned int Balpha = (B &amp; 0xFF000000) &gt;&gt; 24;<br> unsigned int Bred = (B &amp; 0x00FF0000) &gt;&gt; 16;<br> unsigned int Bgreen = (A &amp; 0x0000FF00) &gt;&gt; 8;<br> unsigned int Bblue = (A &amp; 0x000000FF);<br> <br> //Ratio<br> float ratio = Balpha / 255.0f; //Result ofthe learp colors<br> unsigned int Calpha = (Balpha - Aalpha) * ratio + Aalpha;<br> unsigned int Cred = (Bred - Ared) * ratio + Ared;<br> unsigned int Cgreen = (Bgreen - Agreen) * ratio + Agreen;<br> unsigned int Cblue = (Bblue - Ablue) * ratio + Ablue; unsigned int Lerp = (Calpha &lt;&lt; 24) | (Cred &lt;&lt; 16) | (Cgreen &lt;&lt; 8) | (Cblue);<br> return Lerp;<br>}<br><br>unsigned int colorConverter(unsigned int color)<br>{<br> unsigned int red;<br> unsigned int green;<br> unsigned int blue;<br> unsigned int alpha; //colors<br> red = (color &amp; 0x0000FF00) &lt;&lt; 8;<br> green = (color &amp; 0x00FF0000) &gt;&gt; 8;<br> blue = (color &amp; 0xFF000000) &gt;&gt; 24;<br> alpha = (color &amp; 0x000000FF) &lt;&lt; 24; //RGBA<br> unsigned int RGBA = alpha | red | green | blue;<br> return RGBA;<br>}<br></p>
        </div>
      </nav>
    </div>
    <div data-hover="false" data-delay="0" class="dropdown-2 w-dropdown">
      <div data-w-id="6d698fcd-3d73-34e6-a87b-2a5a413ece4b" class="dropdown-toggle-2 w-dropdown-toggle">
        <div data-w-id="6d698fcd-3d73-34e6-a87b-2a5a413ece4c" class="icon accordion-icon w-icon-dropdown-toggle"></div>
        <div class="text-block-13">Animations</div>
      </div>
      <nav class="dropdown-list-2 w-dropdown-list">
        <div class="flex-container-grid this w-container">
          <p class="code-text">‍<strong>Code<br>‍</strong><br>//Get at least 1 “cell” of an animation rendering properly with blending<br>void Animation(const unsigned int* source, int nSourceTextureWidth, int pixelX, int pixelY, int cutFrame, int x, int y)<br>{<br> for (int i = 0; i &lt; cutFrame; i++)<br> {<br> for (int j = 0; j &lt; cutFrame; j++)<br> {<br> drawPixel(x + j, y + i, colorConverter(source[convertDimensionalCordinates(pixelX + j, pixelY + i, nSourceTextureWidth)]));<br> }<br> }<br>}<br><br>void PlayAnimation(float FPS, int frameX, int frameY)<br>{<br> if (FPS &gt; (1.0f / 50))<br> {<br> frameX = frameX + 130; if (frameX &gt; blood_hit_04_width + 1)<br> {<br> frameY = frameY + 130;<br> frameX = 0; if (frameY &gt; blood_hit_04_height + 1)<br> {<br> frameY = 0;<br> } } FPS = 0;<br> }<br>}<br></p>
        </div>
      </nav>
    </div>
    <section id="Features" class="flex-container line curses w-container">
      <h2 class="heading-18"><strong>Guidance</strong></h2>
    </section>
    <div class="container-7 curses w-container">
      <div class="rich-text-curses w-richtext">
        <p> Usage: DrinkingGame drinkerCount bottleCount openerCount<br>            <br>Arguments:<br>                       drinker Count                           Number of drinkers.<br>                       bottle Count                             Number of bottles.<br>                       opener Count                           Number of openers.<br>          </p>
        <p>The drinking game consists of Drinkers, Bottles, and Bottle Openers. During the gameplay drinkers will be constantly trying to drink, which consists of acquiring a bottle and an opener resource. Once a drinker is able to successfully acquire both resources it will  take a drink, sleep for a while, then release both resources so another drinker can use them.</p>
        <p>When trying to get the resources one of two things may happen: the drinker acquires both resources or the drinker fails to get any resources. Each resource has a mutex that determines if it&#x27;s currently in use - if it&#x27;s locked then it&#x27;s being used by a drinker. The drinker will randomly pick a bottle or an opener as its first resource and lock it. Once the drinker has the first resource it will need to look through the entire pool of resources for the second resource. If the drinker had a bottle as the first resource then it will need to look for an unused opener. It is possible that the          drinker cannot find the second resource - in this case the drinker has failed to get both resources.</p>
        <p>‍</p>
      </div>
    </div>
    <section id="Features" class="flex-container line curses w-container">
      <h2 class="heading-18"><strong>Programming Explanation</strong></h2>
    </section>
    <div class="container-7 w-container">
      <div class="rich-text-block-5 curses heading-curses w-richtext">
        <p><strong>Synchronization</strong></p>
        <p>Insure that events in multiple threads always occur in the <br>correct  order <br>Allow the safe sharing of data between threads <br>Beware of overuse of synchronization</p>
        <p><strong>Thread Types</strong></p>
        <p>Joinable – All spawned threads begin as joinable, they need to be declared <br>as detached or Joined.  Once declared they can not be changed.</p>
        <p>‍<br>Joined – A thread that has been declared as joined has a relationship with <br>the thread that contains the join. The thread with the join will wait at the <br>place where the join appears for the joined thread to complete before <br>moving on</p>
        <p>‍<br>Detached - Detached threads are mostly independent of the thread that <br>spawns them<br><br>If you omit this call, the result is undefined</p>
        <p>Threads may be scheduled by the system scheduler (OS) or by a scheduler in the thread library (depending on the threading model).  </p>
        <p><strong>The scheduler in the thread library:</strong></p>
        <p>&gt;will preempt currently running threads on the basis of priority<br>&gt;does NOT time-slice (i.e., is not fair).  A running thread will continue to run forever unless:<br>o a thread call is made into the thread library<br>o a blocking call is made<br>o the running thread calls sched_yield()</p>
        <p>Managing Dependencies and Protecting Critical Sections</p>
        <p>Mutexes<br>Condition Variables<br>Reader/Writer Locks<br>Semaphores<br>Barriers</p>
        <p>A Mutex (Mutual Exclusion) is a data element that allowsmultiple threads to synchronize their access to sharedresources. It is a lockable object that is designed tosignal when critical sections of code need exclusiveaccess, preventing other threads with the sameprotection from executing concurrently and access thesame memory locations.<br>Like a binary semaphore, a mutex has two states, locked and unlocked</p>
        <p>Only one thread can lock a mutex<br>Once a mutex is locked, other threads will block when they try to lock the same mutex, until the locking mutex unlocks the mutex, at which point one of the waiting thread’s lock will succeed, and the process begins again</p>
        <p><strong>Condition Variables</strong></p>
        <p>A Condition variable is synchronization mechanism that <br>allows multiple threads to conditionally wait, until some <br>defined time at which they can proceed.<br>Condition variables are different from mutexes because <br>they don’t protect code, but procedure.<br>A thread will wait on a condition variable until the <br>variable signals it can proceed.</p>
        <p>‍<br><strong>Synchronization Primitives</strong></p>
        <p>Counting Semaphores<br>• Permit a limited number of threads to execute a section of the code<br>Binary Semaphores - Mutexes<br>• Permit only one thread to execute a section of the code<br>Condition Variables<br>• Communicate information about the state of shared data</p>
        <p><strong>Deadlocks</strong></p>
        <p>When two or more competing processes are waiting for each other to release resources, and neither do</p>
        <p>Deadlock Characterization<br>Mutual exclusion:  only one process at a time can use a resource<br>Hold and wait:  a process holding at least one resource is waiting to <br>acquire additional resources held by other processes<br>No preemption:  a resource can be released only voluntarily by the <br>process holding it, after that process has completed its task<br>Circular wait:  there exists a set {P0, P1, ..., Pn} of waiting processes <br>such that P0 is waiting for a resource that is held by P1, P1 is waiting for <br>a resource that is held by P2, ..., Pn–1 is waiting for a resource that is <br>held by Pn, and Pn is waiting for a resource that is held by P0.</p>
      </div>
    </div>
  </div>
  <div class="section-2 footer background-black wf-section">
    <div class="container-4 w-container">
      <div class="footer-holder">
        <div class="social-wrapper">
          <a href="https://juan_diego_lugo.artstation.com" target="_blank" class="social-link w-inline-block"><img src="../images/Artstation.png" loading="lazy" alt="" class="image-13"></a>
          <a href="https://github.com/JDMAXilius" target="_blank" class="social-link w-inline-block"><img src="../images/github.png" loading="lazy" alt="image" class="image-13"></a>
          <a href="https://www.youtube.com/channel/UCRjr5hvDeIpc_SfgTO690RA/featured" target="_blank" class="social-link w-inline-block"><img src="../images/youtube.png" loading="lazy" alt="" class="image-13"></a>
          <a href="#" class="social-link w-inline-block"><img src="../images/pngfind.com-discord-icon-png-283551.png" loading="lazy" sizes="(max-width: 479px) 50vw, 40px" srcset="../images/pngfind.com-discord-icon-png-283551-p-500.png 500w, ../images/pngfind.com-discord-icon-png-283551-p-800.png 800w, ../images/pngfind.com-discord-icon-png-283551-p-1080.png 1080w, ../images/pngfind.com-discord-icon-png-283551.png 1468w" alt="" class="image-13"></a>
          <a href="https://www.facebook.com/juandiego.lugo1" target="_blank" class="social-link w-inline-block"><img src="../images/fb.png" loading="lazy" alt="" class="image-13 f"></a>
          <a href="#" class="social-link w-inline-block"><img src="../images/Instagram.svg" loading="lazy" alt="Instagram logo" class="image-13"></a>
          <a href="https://www.linkedin.com/in/juan-diego-lugo-929a34205/" class="social-link w-inline-block"><img src="../images/LinkedIn.svg" loading="lazy" alt="LinkedIn logo" class="image-14"></a>
        </div><img src="https://uploads-ssl.webflow.com/602ca53e736379cc95d5f180/602ca53e58ea7fb6bb114f5c_Logo.svg" loading="lazy" width="187" alt="" class="image">
        <div class="text-block-3">@Juan Diego 2021<br>‍</div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=602f42d4d0eb6ddf9136273c" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>